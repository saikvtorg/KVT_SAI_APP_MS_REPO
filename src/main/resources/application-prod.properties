# Production profile properties (use with --spring.profiles.active=prod)
# IMPORTANT: do not put secrets here. Supply DB credentials and other secrets via environment variables / App Settings.

server.port=8080

# Datasource - use env vars / Azure App Settings
# Example AZURE_SQL_SERVER should be the server FQDN without port, e.g. myserver.database.windows.net
spring.datasource.url=jdbc:sqlserver://saikvt-sqlserver-prod.database.windows.net:1433;databaseName=saikvtdb;encrypt=true;trustServerCertificate=false;hostNameInCertificate=*.database.windows.net;loginTimeout=30;
spring.datasource.username=sai-admin-prod
spring.datasource.password=${AZURE_SQL_PASSWORD}
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# Flyway: enable in prod to apply canonical SQL Server migrations. If your Azure SQL compatibility level requires
# manual intervention, set this=false and run migrations via CI or manually (see prod README).
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration/canonical
spring.flyway.baseline-on-migrate=true

# JPA / Hibernate settings for production: validate the schema (do not auto-create)
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect
spring.jpa.properties.hibernate.globally_quoted_identifiers=true

# Connection pool tuning (Hikari defaults are okay, but tune if needed)
spring.datasource.hikari.maximum-pool-size=30
spring.datasource.hikari.minimum-idle=5

# Logging and management
logging.level.root=INFO
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=never
management.server.port=${MANAGEMENT_PORT:8080}

# Security / headers
# Add any additional production-specific settings here

# Example feature flags
# app.feature.x=false

